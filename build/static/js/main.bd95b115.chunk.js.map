{"version":3,"sources":["Components/Shared/shared.ts","Components/App/AppPresenter.tsx","constant.ts","Components/App/AppContainer.tsx","Components/App/index.tsx","index.tsx"],"names":["Card","styled","div","_templateObject","Title","h1","_templateObject2","Key","h3","_templateObject3","KeyName","span","_templateObject4","SharedInput","input","_templateObject5","Button","button","_templateObject6","Header","AppPresenter_templateObject","AppContainer","AppPresenter_templateObject2","SendTxForm","form","AppPresenter_templateObject3","Submit","AppPresenter_templateObject4","Input","AppPresenter_templateObject5","props","hasError","AppPresenter","react_default","a","createElement","AppPresenter_AppContainer","loading","disabled","isMining","onClick","mineBlock","address","balance","onSubmit","handleSubmit","as","placeholder","required","name","value","data","onChange","handleInput","type","amount","max","readOnly","SELF_NODE","port","concat","SELF_P2P","sendSubmit","_ref","Object","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","console","log","axios","post","sent","stop","_x","_x2","apply","this","arguments","registOnMaster","_ref2","_callee2","res","_context2","peer","_x3","getAddress","_ref3","_callee3","_context3","get","abrupt","_x4","getBalance","_ref4","_callee4","_context4","_x5","_ref5","_callee5","_context5","_x6","_useState","useState","_useState2","slicedToArray","setLoading","_useState3","_useState4","setAddress","_useReducer","useReducer","objectSpread","_useReducer2","sendData","setSendData","_useState5","_useState6","setBalance","_useState7","_useState8","setMine","useEffect","sharedPort","then","result","interval","setInterval","bal","clearInterval","App_AppPresenter","e","defineProperty","target","preventDefault","remote","getGlobal","ReactDOM","render","App","document","getElementById"],"mappings":"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","file":"static/js/main.bd95b115.chunk.js","sourcesContent":["import styled, { StyledComponent } from \"styled-components\";\r\n\r\nexport const Card = styled.div`\r\n  box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);\r\n  background-color: white;\r\n  width: 90%;\r\n  padding: 20px;\r\n  box-sizing: border-box;\r\n  border-radius: 10px;\r\n  margin-bottom: 50px;\r\n`;\r\n\r\nexport const Title = styled.h1`\r\n  color: #305371;\r\n`;\r\n\r\nexport const Key = styled.h3`\r\n  color: #305371;\r\n  margin-bottom: 20px !important;\r\n  white-space: normal;\r\n  word-break: break-all;\r\n  &:last-child {\r\n    margin-bottom: 0;\r\n  }\r\n`;\r\n\r\nexport const KeyName = styled.span`\r\n  color: #999;\r\n`;\r\n\r\nexport const SharedInput = styled.input`\r\nbackground-color: white;\r\n  border: 0;\r\n  width: 100px;\r\n  padding: 10px 0;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #305371;\r\n  border-radius: 5px;\r\n  box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);\r\n  transition: all 0.1s linear;\r\n  &:focus,\r\n  &:active {\r\n    outline: none;\r\n  }\r\n  &:hover {\r\n    box-shadow: 0 7px 14px rgba(50, 50, 93, 0.1), 0 3px 6px rgba(0, 0, 0, 0.08);\r\n    transform: translateY(-1px);\r\n  }\r\n  &:active {\r\n    box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);\r\n    background-color: #f6f9fc;\r\n    transform: translateY(1px);\r\n  }\r\n  &:disabled {\r\n    box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);\r\n    background-color: #f6f9fc;\r\n    transform: none;\r\n    cursor: progress;\r\n    &:focus,\r\n    &:active,\r\n    &:hover {\r\n      transform: none;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const Button = styled.button`\r\n  background-color: white;\r\n  border: 0;\r\n  width: 100px;\r\n  padding: 10px 0;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #305371;\r\n  border-radius: 5px;\r\n  box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);\r\n  transition: all 0.1s linear;\r\n  cursor: pointer;\r\n  &:focus,\r\n  &:active {\r\n    outline: none;\r\n  }\r\n  &:hover {\r\n    box-shadow: 0 7px 14px rgba(50, 50, 93, 0.1), 0 3px 6px rgba(0, 0, 0, 0.08);\r\n    transform: translateY(-1px);\r\n  }\r\n  &:active {\r\n    box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);\r\n    background-color: #f6f9fc;\r\n    transform: translateY(1px);\r\n  }\r\n  &:disabled {\r\n    box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);\r\n    background-color: #f6f9fc;\r\n    transform: none;\r\n    cursor: progress;\r\n    &:focus,\r\n    &:active,\r\n    &:hover {\r\n      transform: none;\r\n    }\r\n  }\r\n`;","import React, { Dispatch, ChangeEvent, FormEvent } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {\r\n  Card,\r\n  Key,\r\n  KeyName,\r\n  Title,\r\n  // Notification,\r\n  Button,\r\n  SharedInput\r\n} from \"../Shared\";\r\n\r\nconst Header = styled.div`\r\n  margin: 50px 0;\r\n  width: 90%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`;\r\n\r\nconst AppContainer = styled.div`\r\n  background-color: #f2f6fa;\r\n  height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst SendTxForm = styled.form`\r\n  margin-top: 25px;\r\n`;\r\n\r\nconst Submit = styled(SharedInput)`\r\n  margin-right:10px;\r\n  border: 2px solid #305371;\r\n  box-shadow:none;\r\n  &:hover{\r\n      box-shadow:none;\r\n      transform:none;\r\n  }\r\n  &:disabled{\r\n      color:#999;\r\n      border: 2px solid #999;\r\n      cursor:not-allowed;\r\n      box-shadow:none;\r\n  }\r\n`;\r\n\r\nconst Input = styled(Submit)`\r\n  width: 200px;\r\n  padding-left: 10px;\r\n  &:active {\r\n    background-color: transparent;\r\n  }\r\n  color: ${(props: any) => (props && props.hasError ? \"#e74c3c\" : \"inherit\")};\r\n  border-color: ${(props: any) => (props && props.hasError ? \"#e74c3c\" : \"inherit\")};\r\n`;\r\n\r\ninterface IProps {\r\n  loading: boolean;\r\n  address: string;\r\n  balance: number;\r\n  isMining: boolean;\r\n  mineBlock: () => void;\r\n  handleInput: Dispatch<ChangeEvent<HTMLInputElement>>;\r\n  handleSubmit: Dispatch<FormEvent<HTMLFormElement>>;\r\n  data: ISendData;\r\n}\r\n\r\nconst AppPresenter = (props: IProps) => {\r\n  return (\r\n    <AppContainer>\r\n      <Header>\r\n        <Title>{props.loading ? \"Loading...\" : \"Nomadcoin Wallet\"}</Title>\r\n        <Button disabled={props.isMining} onClick={props.mineBlock}>\r\n          {props.isMining ? \"Mining\" : \"Mine\"}\r\n        </Button>\r\n      </Header>\r\n      <Card>\r\n        <Key>\r\n          <KeyName>Your address:</KeyName> <Key>{props.address}</Key>\r\n        </Key>\r\n        <Key>\r\n          <KeyName>Your balance:</KeyName> {props.balance} NMD\r\n      </Key>\r\n      </Card>\r\n      <Card>\r\n        <Key>Send NMD: </Key>\r\n        <SendTxForm onSubmit={props.handleSubmit}>\r\n          <Input\r\n            as=\"input\"\r\n            placeholder={\"Address\"}\r\n            required\r\n            name=\"address\"\r\n            value={props.data.address}\r\n            onChange={props.handleInput}\r\n          />\r\n          <Input\r\n            as=\"input\"\r\n            placeholder={\"Amount\"}\r\n            required\r\n            name=\"amount\"\r\n            type=\"number\"\r\n            value={props.data.amount || \"\"}\r\n            onChange={props.handleInput}\r\n            max={props.balance}\r\n          />\r\n          <Submit\r\n            value={\"Send\"}\r\n            type={\"submit\"}\r\n            readOnly\r\n            disabled={!props.data.address || !props.data.amount}\r\n          />\r\n        </SendTxForm>\r\n      </Card>\r\n    </AppContainer>\r\n  );\r\n};\r\n\r\nexport default AppPresenter;\r\n","export const MASTER_NODE = \"http://localhost:3300\";\r\nexport const SELF_NODE = (port: number) => `http://localhost:${port}`;\r\nexport const SELF_P2P = (port: number) => `ws://localhost:${port}`;\r\n","import React, { useState, useEffect, useReducer } from \"react\";\r\nimport AppPresenter from \"./AppPresenter\";\r\nimport axios from \"axios\";\r\nimport { MASTER_NODE, SELF_P2P, SELF_NODE } from \"../../constant\";\r\n\r\nconst AppContainer = (props: IProps) => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [address, setAddress] = useState(\"\");\r\n  const [sendData, setSendData] = useReducer(\r\n    (prev, next): ISendData => ({ ...prev, ...next }),\r\n    { address: \"\", amount: 0 }\r\n  );\r\n  const [balance, setBalance] = useState(0);\r\n  const [isMining, setMine] = useState(false)\r\n\r\n  useEffect(() => {\r\n    registOnMaster(props.sharedPort);\r\n\r\n    getAddress(props.sharedPort).then(result => {\r\n      setAddress(result);\r\n      setLoading(false);\r\n    });\r\n\r\n    const handleBalance = () => {\r\n      getBalance(props.sharedPort).then(bal => setBalance(bal));\r\n    }\r\n\r\n    const interval = setInterval(handleBalance, 2000);\r\n\r\n    return () => {\r\n      clearInterval(interval);\r\n    }\r\n  }, [props.sharedPort]);\r\n\r\n  const handleBlock = () => {\r\n    setMine(true);\r\n    mineBlock(props.sharedPort).then(() => setMine(false))\r\n  }\r\n\r\n  const handleInput = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setSendData({ [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    sendSubmit(props.sharedPort, sendData);\r\n  };\r\n\r\n\r\n  return <AppPresenter\r\n    address={address}\r\n    loading={loading}\r\n    balance={balance}\r\n    isMining={isMining}\r\n    mineBlock={handleBlock}\r\n    data={sendData}\r\n    handleInput={handleInput}\r\n    handleSubmit={handleSubmit}\r\n  />;\r\n};\r\n\r\nconst sendSubmit = async (port: number, data: ISendData) => {\r\n  console.log(port, 'port????/*  */');\r\n  const res = await axios.post(`${SELF_NODE(port)}/transactions`, data);\r\n}\r\n\r\nconst registOnMaster = async (port: number) => {\r\n  const res = await axios.post(`${MASTER_NODE}/peers`, {\r\n    peer: SELF_P2P(port)\r\n  });\r\n  console.log(res);\r\n};\r\n\r\nconst getAddress = async (port: number) => {\r\n  const res = await axios.get(`${SELF_NODE(port)}/me/address`);\r\n  return res.data;\r\n};\r\n\r\nconst getBalance = async (port: number) => {\r\n  const res = await axios.get(`${SELF_NODE(port)}/me/balance`);\r\n  const { balance } = res.data;\r\n  return balance;\r\n};\r\n\r\nconst mineBlock = async (port: number) => {\r\n  const res = await axios.post(`${SELF_NODE(port)}/blocks`);\r\n  return res.data;\r\n}\r\n\r\nexport default AppContainer;\r\n","import AppContainer from './AppContainer';\r\n\r\nexport default AppContainer;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./Components/App\";\r\nimport { remote } from \"electron\";\r\n\r\ndeclare global {\r\n  interface Window {\r\n    sharedPort: any;\r\n  }\r\n}\r\n\r\nconst sharedPort = remote.getGlobal(\"sharedPort\");\r\n\r\n// const sharedPort = 49862;\r\n\r\nReactDOM.render(\r\n  <App sharedPort={sharedPort} />,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}